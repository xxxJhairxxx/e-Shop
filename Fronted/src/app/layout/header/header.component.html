<nav
  class="bg-white border-gray-200 dark:bg-gray-900 left-0 top-0 fixed w-full z-[999] flex items-center"
>
  <div
    class="max-w-[90rem] flex w-full px-3 h-full laptop:mx-auto items-center justify-between"
  >
    <a routerLink="/" class="flex gap-1 items-center rtl:space-x-reverse">
      <img src="logo.png" class="h-9" alt="Eshop Logo" />
      <p
        class="text-[1.5rem] font-[600] before:content-['-'] before:font-[900] before:text-primary before:mr-[0.3rem]"
      >
        shop
      </p>
    </a>

    <div class="">
      <ul class="font-medium flex items-center p-4 laptop:gap-5">
        <li>
          <a
            routerLink="/products"
            class="block py-2 px-3 cursor-pointer text-gray-900 rounded-sm hover:bg-gray-100 md:hover:bg-transparent md:border-0 md:hover:text-blue-700 md:p-0 dark:text-white md:dark:hover:text-blue-500 dark:hover:bg-gray-700 dark:hover:text-white md:dark:hover:bg-transparent"
            >Lista Productos</a
          >
        </li>
        <li class="w-fit item-hover relative">
          <button
            title="togle"
            (click)="toggleModal()"
            class="flex w-full cursor-pointer h-full items-center justify-center gap-2 relative"
          >
            <div class="w-[2.5rem] h-[2.5rem] rounded-full p-[0.6rem]">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                width="23"
                height="20"
                viewBox="0 0 23 20"
                fill="none"
                class="w-full h-full object-contain"
              >
                <path
                  d="M13.322 15.3408C15.4713 15.3408 17.6277 15.3408 19.777 15.3408C20.1175 15.3408 20.4225 15.3966 20.5715 15.7383C20.7204 16.066 20.6353 16.3519 20.3658 16.582C20.1884 16.7284 20.3161 16.8818 20.3516 17.0282C20.6921 18.3042 19.9614 19.5663 18.6775 19.9079C16.9325 20.3751 15.3436 18.8202 15.7905 17.0491C15.8685 16.7284 15.7834 16.7005 15.5139 16.7075C14.4286 16.7145 13.3362 16.7214 12.2509 16.7075C11.96 16.7005 11.8678 16.7284 11.9459 17.0631C12.3005 18.604 11.2152 19.9846 9.67595 19.9846C8.13667 19.9846 7.00882 18.5831 7.36349 17.1119C7.4557 16.7145 7.4557 16.7005 7.03719 16.7145C6.31366 16.7423 5.65397 16.6378 5.10777 16.1078C3.94445 14.9713 4.4268 13.0887 6.02283 12.6355C6.3775 12.5379 6.42715 12.4263 6.33494 12.0986C5.38442 8.68199 4.45518 5.26541 3.52594 1.84185C3.43372 1.48625 3.25639 1.35377 2.88043 1.36074C2.17109 1.38863 1.46175 1.37469 0.752401 1.36771C0.284234 1.37469 0.0146835 1.13064 0.0004966 0.719259C-0.0136903 0.300901 0.277141 0.0150239 0.738214 0.00805129C1.58943 0.00107867 2.44064 -0.00589396 3.29185 0.00805129C4.05085 0.0219965 4.6467 0.551916 4.85241 1.34679C5.05103 2.11378 5.27802 2.86683 5.46954 3.63382C5.54757 3.94758 5.69653 4.05217 6.02992 4.05217C10.6903 4.05217 15.3436 4.05915 20.004 4.07309C20.4296 4.07309 20.8552 4.10098 21.2808 4.10795C22.3094 4.1219 22.9336 4.85402 22.7137 5.84414C22.359 7.4339 21.976 9.00971 21.6 10.5925C21.4582 11.1921 21.295 11.7848 21.1815 12.3914C20.9971 13.3676 20.2806 13.9394 19.2734 13.9324C15.1805 13.9045 11.0946 13.9184 7.00172 13.9184C6.84567 13.9184 6.68961 13.9115 6.54065 13.9324C6.12923 13.9882 5.90933 14.2531 5.91643 14.6436C5.92352 15.0131 6.15051 15.2642 6.54774 15.3199C6.67543 15.3408 6.8102 15.3339 6.93788 15.3339C9.06591 15.3408 11.1939 15.3408 13.322 15.3408ZM7.44152 5.46762C7.08684 5.46064 6.73217 5.47459 6.3775 5.46064C6.09376 5.4467 5.98736 5.53734 6.07248 5.82322C6.27819 6.54837 6.46971 7.2805 6.66833 8.00565C6.71799 8.18694 6.8102 8.31244 7.03719 8.31244C7.6756 8.30547 8.31401 8.30547 8.95242 8.31244C9.16522 8.31244 9.25744 8.21483 9.22906 8.01262C9.12266 7.25261 9.01626 6.49956 8.90986 5.73955C8.88149 5.53734 8.77508 5.46064 8.57647 5.46762C8.19342 5.47459 7.81747 5.46762 7.44152 5.46762ZM14.5775 6.89003C14.5775 7.25261 14.5846 7.60821 14.5775 7.97079C14.5704 8.2218 14.6626 8.32639 14.9251 8.31942C15.5139 8.30547 16.1026 8.31245 16.6985 8.31942C16.9325 8.32639 17.0389 8.24272 17.0673 8.01262C17.1595 7.2805 17.273 6.5414 17.3794 5.80927C17.4078 5.59312 17.3511 5.48156 17.1028 5.48156C16.3722 5.48853 15.6415 5.48853 14.9109 5.47459C14.6626 5.46762 14.5775 5.5722 14.5846 5.80927C14.5846 6.17185 14.5775 6.52745 14.5775 6.89003ZM13.1375 6.897C13.1375 6.52745 13.1375 6.15093 13.1375 5.78138C13.1375 5.58615 13.0737 5.47459 12.8538 5.47459C12.0948 5.47459 11.3429 5.47459 10.5839 5.47459C10.3782 5.47459 10.3073 5.5722 10.3356 5.76047C10.4491 6.52745 10.5626 7.30141 10.6619 8.0684C10.6903 8.26364 10.7896 8.31942 10.974 8.31942C11.5912 8.31942 12.2012 8.31245 12.8183 8.31942C13.0737 8.32639 13.1446 8.20088 13.1375 7.97776C13.1375 7.61518 13.1375 7.25261 13.1375 6.897ZM19.5855 8.31244C19.8692 8.31244 20.153 8.31244 20.4367 8.31244C20.5998 8.31244 20.6992 8.26364 20.7346 8.08932C20.912 7.30839 21.0964 6.53443 21.2879 5.75349C21.3376 5.55826 21.2808 5.48156 21.0609 5.48156C20.4225 5.48853 19.7841 5.48853 19.1528 5.48156C18.9542 5.48156 18.8478 5.53734 18.8194 5.74652C18.7201 6.50654 18.6066 7.25958 18.5002 8.0196C18.4718 8.22877 18.5569 8.31942 18.7768 8.31942C19.0393 8.31245 19.3088 8.31244 19.5855 8.31244ZM8.30692 9.73486C8.02318 9.73486 7.73944 9.74183 7.4557 9.72789C7.22871 9.71394 7.15778 9.79761 7.21453 10.0138C7.42024 10.7529 7.62595 11.485 7.83166 12.2241C7.8955 12.4472 8.03027 12.5588 8.26436 12.5518C8.67578 12.5518 9.08719 12.5448 9.50571 12.5518C9.74688 12.5588 9.81782 12.4542 9.78945 12.2311C9.69014 11.485 9.59083 10.7389 9.49152 9.99285C9.47024 9.81853 9.37803 9.72092 9.1865 9.72789C8.89567 9.73486 8.60484 9.73486 8.30692 9.73486ZM15.7337 9.73486C15.4642 9.73486 15.1946 9.74881 14.918 9.73486C14.6485 9.72092 14.5704 9.83248 14.5704 10.0835C14.5775 10.8017 14.5775 11.5199 14.5704 12.238C14.5704 12.4751 14.6555 12.5727 14.8967 12.5657C15.3081 12.5518 15.7196 12.5518 16.131 12.5657C16.3509 12.5727 16.4502 12.496 16.4786 12.2799C16.5779 11.5338 16.6914 10.7877 16.7978 10.0486C16.8332 9.81853 16.7268 9.73486 16.4998 9.74183C16.2516 9.74183 15.9891 9.73486 15.7337 9.73486ZM13.1375 11.1503C13.1375 10.7808 13.1375 10.4112 13.1375 10.0347C13.1375 9.83945 13.0737 9.72789 12.8538 9.72789C12.2863 9.73486 11.7189 9.73486 11.1585 9.72789C10.9599 9.72789 10.8747 9.81156 10.9031 10.0068C11.0166 10.7738 11.1301 11.5408 11.2365 12.3078C11.2649 12.503 11.3571 12.5588 11.5415 12.5518C11.9671 12.5448 12.3927 12.5448 12.8113 12.5518C13.0595 12.5588 13.1446 12.4472 13.1375 12.2171C13.1305 11.8685 13.1375 11.5059 13.1375 11.1503ZM18.7697 12.5588C18.9613 12.5588 19.1457 12.5518 19.3372 12.5588C19.5784 12.5727 19.7132 12.4542 19.7699 12.2311C19.9473 11.485 20.1104 10.7389 20.2948 9.99285C20.3445 9.78367 20.2735 9.72092 20.0678 9.72789C19.5713 9.73486 19.0748 9.73486 18.5782 9.72789C18.3583 9.72092 18.2519 9.81853 18.2235 10.0207C18.1526 10.5925 18.0533 11.1642 17.9966 11.743C17.9185 12.5588 17.9327 12.5588 18.7697 12.5588ZM10.591 17.6767C10.5981 17.1468 10.1938 16.7284 9.67595 16.7214C9.15813 16.7145 8.70415 17.1537 8.70415 17.6697C8.70415 18.1717 9.14394 18.604 9.64758 18.611C10.1512 18.618 10.5839 18.1857 10.591 17.6767ZM17.1312 17.6348C17.1241 18.1717 17.5568 18.611 18.0746 18.604C18.5853 18.604 19.0109 18.1717 19.0109 17.6627C19.0109 17.1537 18.5924 16.7214 18.0817 16.7145C17.578 16.7145 17.1383 17.1328 17.1312 17.6348Z"
                  fill="#ccc"
                />
              </svg>
            </div>
            <span
              class="absolute left-[-0.2rem] bottom-[-0.2rem] bg-red-600 w-[1.2rem] h-[1.2rem] rounded-full flex items-center justify-center laptop:text-[0.9rem] text-[0.7rem]"
              >{{ cartStore.productsCount() }}</span
            >
          </button>
          <!-- MAIN MODAL -->
          @if (this.showModal) {
          <button
            title="background"
            (click)="toggleModal()"
            class="laptop:bg-black/0 bg-black/60 w-full h-screen fixed top-0 right-0"
          ></button>
          <div
            class="laptop:absolute fixed w-[94%] min-h-[42vh] mx-auto z-[999]  translate-y-[-50%] laptop:-translate-y-0 bg-white laptop:w-[35rem] top-[50%] laptop:top-[3rem] right-0 left-0 laptop:left-auto rounded-lg shadow-sm dark:bg-gray-700"
          >
            <!-- Modal header -->
            <div
              class="flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600 border-gray-200"
            >
              <h3 class="text-lg font-semibold text-gray-900 dark:text-white">
                Shopping Cart
              </h3>
              <button
                title="close"
                (click)="toggleModal()"
                type="button"
                class="text-gray-400 cursor-pointer bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm h-8 w-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white"
                data-modal-toggle="crypto-modal"
              >
                <svg
                  class="w-3 h-3"
                  aria-hidden="true"
                  xmlns="http://www.w3.org/2000/svg"
                  fill="none"
                  viewBox="0 0 14 14"
                >
                  <path
                    stroke="currentColor"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    stroke-width="2"
                    d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"
                  />
                </svg>
              </button>
            </div>
            <!-- Modal body -->
            <div class="p-4 md:p-5">
              @if(cartStore.products().length !== 0){
              <ul
                class="my-4 space-y-3 laptop:min-h-[13rem] h-fit laptop:max-h-[16rem] max-h-[55vh] overflow-y-auto scroll-style"
              >
                @for (product of cartStore.products(); track $index) {
                <li>
                  <div
                    class="flex flex-wrap laptop:flex-nowrap gap-2 items-center p-6 px-8 laptop:px-3 text-base font-bold text-gray-900 rounded-lg bg-gray-50 hover:bg-gray-100 group hover:shadow dark:bg-gray-600 dark:hover:bg-gray-500 dark:text-white"
                  >
                    <picture class="h-full laptop:w-[2.5rem] w-[22%]  laptop:ml-0 ml-2"
                      ><img  [src]="product.image" alt="product"
                    /></picture>
                    <span
                      class="laptop:w-[16rem] w-[65%]  overflow-hidden ms-3 whitespace-nowrap"
                      >{{ product.title }}</span
                    >
                    <div class="laptop:w-[5rem] w-[30%] ">
                      <div class="flex items-center">
                        <button
                          title="button"
                          (click)="onDecrease(product.id)"
                          class="inline-flex cursor-pointer h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700"
                        >
                          <svg
                            class="h-2.5 w-2.5 text-gray-900 dark:text-white"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 18 2"
                          >
                            <path
                              stroke="currentColor"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M1 1h16"
                            ></path>
                          </svg>
                        </button>
                        <input
                          title="element"
                          type="text"
                          id="counter-input"
                          class="w-10 shrink-0 border-0 bg-transparent text-center text-sm font-medium text-gray-900 focus:outline-none focus:ring-0 dark:text-white"
                          placeholder=""
                          [value]="product.qty"
                          required=""
                        />
                        <button
                          title="button"
                          (click)="onIncrease(product.id)"
                          class="inline-flex cursor-pointer h-5 w-5 shrink-0 items-center justify-center rounded-md border border-gray-300 bg-gray-100 hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-100 dark:border-gray-600 dark:bg-gray-700 dark:hover:bg-gray-600 dark:focus:ring-gray-700"
                        >
                          <svg
                            class="h-2.5 w-2.5 text-gray-900 dark:text-white"
                            aria-hidden="true"
                            xmlns="http://www.w3.org/2000/svg"
                            fill="none"
                            viewBox="0 0 18 18"
                          >
                            <path
                              stroke="currentColor"
                              stroke-linecap="round"
                              stroke-linejoin="round"
                              stroke-width="2"
                              d="M9 1v16M1 9h16"
                            ></path>
                          </svg>
                        </button>
                      </div>
                    </div>
                    <span
                      class="inline-flex laptop:w-[7rem] w-[30%]  items-center justify-center px-2 py-0.5 ms-3 text-md font-medium text-gray-100 rounded-sm"
                      >$ {{ product.price }}</span
                    >
                    <button
                      class="cursor-pointer laptop:w-auto w-[30%]   flex items-center justify-center p-2 hover:bg-red-100 rounded-[0.2rem]"
                      title="button"
                      (click)="removeItem(product.id)"
                    >
                      <svg
                        class="text-red-500"
                        aria-hidden="true"
                        xmlns="http://www.w3.org/2000/svg"
                        width="18"
                        height="18"
                        fill="none"
                        viewBox="0 0 24 24"
                      >
                        <path
                          stroke="currentColor"
                          stroke-linecap="round"
                          stroke-linejoin="round"
                          stroke-width="2"
                          d="M5 7h14m-9 3v8m4-8v8M10 3h4a1 1 0 0 1 1 1v3H9V4a1 1 0 0 1 1-1ZM6 7h12v13a1 1 0 0 1-1 1H7a1 1 0 0 1-1-1V7Z"
                        ></path>
                      </svg>
                    </button>
                  </div>
                </li>
                }
              </ul>
              <div class="flex w-full justify-end p-2 gap-5">
                <div
                  class="inline-flex items-center text-md font-bold text-gray-500 dark:text-gray-400"
                >
                  Total
                </div>
                <div>{{ cartStore.totalAmount() | currency }}</div>
              </div>
              } @else {
              <div class="w-full h-full pt-3 text-center">
                <span class="text-red-500">Cart empty</span>
                <picture class="block mx-auto laptop:w-[12rem] laptop:h-auto h-[14rem] opacity-80">
                  <img
                    class="w-full h-full object-contain"
                    src="https://i.postimg.cc/7Y9DwVPx/cart.png"
                    alt="Cart Icon"
                  />
                </picture>
              </div>

              }
            </div>
          </div>
          }
        </li>
      </ul>
    </div>
  </div>
</nav>
